---
title: 变量，作用域与内存
createTime: 2025/11/11 15:15:16
permalink: /web/javascript/duzdcvgi/
---

## 原始值与引用值

在上一章中，我们提到了 JavaScript 的数据类型有原始数据类型和引用数据类型。
原始值就是由原始类型声明的值，引用值则是由多个原始值或引用值构成的对象。
它们之间的区别不仅表现在数据结构上，还有其他区别。

### 1 .动态属性

原始值不能有属性，即使在声明后添加属性不会发生错误，但并不会添加成功。

```js
const user = "zhangsan";
user.age = "18";
console.log(user); // zhangsan
console.log(user.age); // undefined
```

引用值可以有属性，且在声明后可以增加、删除和修改属性。

```js
const user = {
  name: "zhangsan",
};
user.age = "19";
console.log(user); // {name: 'zhangsan', age: '19'}
console.log(user.age); // 19
console.log(user.hasOwnProperty("age")); // true
delete user.age;
console.log(user); // {name: 'zhangsan'}
```

### 2. 复制值

原始值与引用值在将一个值赋给变量时，都会复制这个值，但它们的复制方式并不同。

原始值复制时会将值复制到新的位置，即复制前后的两个值相互独立，并不影响。

```js
let str = "hello";
let str2 = str;
str2 = "world";
console.log(str); // hello
console.log(str2); // world
```

引用值复制时，也会将值复制到新的位置。但复制的还有指针，它们指向存储在堆内存中的相同对象。
因此这两个对象实际上指向同一个对象，在一个对象上象进行修改时，其变化会在另一个对象中体现出来。

```js
let obj1 = {
  name: "Python",
};
let obj2 = obj1;
obj2.name = "JavaScript";
console.log(obj1); // {name: 'JavaScript'}
console.log(obj2); // {name: 'JavaScript'}
```

### 3. 传递参数

在 JavaScript 中，函数的参数是按值传递的，即函数调用时参数的值会被复制给参数变量。所以函数内部修改参数与原始值和引用值的复制一样。

传入的原始值在函数内部被改变，并不会影响外部的值，因为在传入时它们就是两个值，它们之间是相互独立的。而传入的引用值，外部与内部指向同一个对象，因此修改对象属性，也会在函数外部体现。
在函数内部声明的引用类型，当函数退出时会被销毁。

```js
// 传递原始值
let str = "hello";
function change(s) {
  s = "world";
}
change(str); // 调用 change 传入 str 原始值
console.log(str); // 仍然输出 hello

// 传递引用值
let obj = {
  name: "Python",
};
function changeObj(o) {
  o.name = "JavaScript";
  let obj = new Object();
  obj.name = "C++";
  return obj;
}
console.log(changeObj(obj));
// changeObj(obj); // 调用 changeObj 函数传入 obj 引用值
console.log(obj); // 输出 {name: 'JavaScript'} ,str 的被修改了
```
